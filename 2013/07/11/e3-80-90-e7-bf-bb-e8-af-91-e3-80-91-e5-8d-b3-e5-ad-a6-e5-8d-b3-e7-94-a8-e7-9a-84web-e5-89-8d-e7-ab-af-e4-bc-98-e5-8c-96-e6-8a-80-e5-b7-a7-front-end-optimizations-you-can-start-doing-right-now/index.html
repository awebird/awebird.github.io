<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>【翻译】即学即用的Web前端优化技巧 ( Front-end optimizations you can start doing right now ) | aWeBird</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="英文原文 http://odiseo.net/javascript/front-end-optimizations-you-can-do-right-now-on-your-existing-code  强烈建议各位Web前端开发人员都要“真正”去学习Javascript并且掌握基本的DOM知识。诚然我也不得不赞同，不少基于Javascript特性的小把戏和小技巧根本就不会带来终端用户能明显觉察到">
<meta name="keywords" content="Front-end,javascript,jquery,optimization,Web,优化,前端,翻译">
<meta property="og:type" content="article">
<meta property="og:title" content="【翻译】即学即用的Web前端优化技巧 ( Front-end optimizations you can start doing right now )">
<meta property="og:url" content="http://awebird.com/2013/07/11/e3-80-90-e7-bf-bb-e8-af-91-e3-80-91-e5-8d-b3-e5-ad-a6-e5-8d-b3-e7-94-a8-e7-9a-84web-e5-89-8d-e7-ab-af-e4-bc-98-e5-8c-96-e6-8a-80-e5-b7-a7-front-end-optimizations-you-can-start-doing-right-now/index.html">
<meta property="og:site_name" content="aWeBird">
<meta property="og:description" content="英文原文 http://odiseo.net/javascript/front-end-optimizations-you-can-do-right-now-on-your-existing-code  强烈建议各位Web前端开发人员都要“真正”去学习Javascript并且掌握基本的DOM知识。诚然我也不得不赞同，不少基于Javascript特性的小把戏和小技巧根本就不会带来终端用户能明显觉察到">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://awebird.com/images/uploads/2013/07/thumb-300x144.jpg">
<meta property="og:image" content="http://awebird.com/images/uploads/2013/07/C9LBtwc-208x300.png">
<meta property="og:updated_time" content="2018-06-12T06:07:09.559Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【翻译】即学即用的Web前端优化技巧 ( Front-end optimizations you can start doing right now )">
<meta name="twitter:description" content="英文原文 http://odiseo.net/javascript/front-end-optimizations-you-can-do-right-now-on-your-existing-code  强烈建议各位Web前端开发人员都要“真正”去学习Javascript并且掌握基本的DOM知识。诚然我也不得不赞同，不少基于Javascript特性的小把戏和小技巧根本就不会带来终端用户能明显觉察到">
<meta name="twitter:image" content="http://awebird.com/images/uploads/2013/07/thumb-300x144.jpg">
  
    <link rel="alternate" href="/atom.xml" title="aWeBird" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">aWeBird</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">a web bird&#39;s blog</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://awebird.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-e3-80-90-e7-bf-bb-e8-af-91-e3-80-91-e5-8d-b3-e5-ad-a6-e5-8d-b3-e7-94-a8-e7-9a-84web-e5-89-8d-e7-ab-af-e4-bc-98-e5-8c-96-e6-8a-80-e5-b7-a7-front-end-optimizations-you-can-start-doing-right-now" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/07/11/e3-80-90-e7-bf-bb-e8-af-91-e3-80-91-e5-8d-b3-e5-ad-a6-e5-8d-b3-e7-94-a8-e7-9a-84web-e5-89-8d-e7-ab-af-e4-bc-98-e5-8c-96-e6-8a-80-e5-b7-a7-front-end-optimizations-you-can-start-doing-right-now/" class="article-date">
  <time datetime="2013-07-11T14:46:15.000Z" itemprop="datePublished">2013-07-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      【翻译】即学即用的Web前端优化技巧 ( Front-end optimizations you can start doing right now )
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>英文原文 <a href="http://odiseo.net/javascript/front-end-optimizations-you-can-do-right-now-on-your-existing-code" target="_blank" rel="noopener">http://odiseo.net/javascript/front-end-optimizations-you-can-do-right-now-on-your-existing-code</a> <a href="/images/uploads/2013/07/thumb.jpg"><img src="/images/uploads/2013/07/thumb-300x144.jpg" alt="thumb"></a> 强烈建议各位Web前端开发人员都要“真正”去<a href="http://javascriptissexy.com/16-javascript-concepts-you-must-know-well/" target="_blank" rel="noopener">学习Javascript</a>并且掌握基本的<a href="http://domenlightenment.com/" target="_blank" rel="noopener">DOM</a>知识。诚然我也不得不赞同，不少基于Javascript特性的小把戏和小技巧根本就不会带来终端用户能明显觉察到的<a href="http://ericleads.com/2013/04/youre-optimizing-the-wrong-things/" target="_blank" rel="noopener">性能提升</a>。话虽如此，我会在这篇文章里分享一些优化技巧，你可以马上在代码里使用这些技巧从而让程序跑的更快。而且从今以后，每当在项目里使用Javascript的时候你都应该想到并实践这些优化。</p>
<h1 id="精明的使用选择器-Use-selectors-wisely"><a href="#精明的使用选择器-Use-selectors-wisely" class="headerlink" title="精明的使用选择器 Use selectors wisely"></a>精明的使用选择器 Use selectors wisely</h1><p>假设程序里有一个id为#profile-container的div, 你想在其内部选择一个或多个class为myClass的input元素。你可能会很快写出下面这样一个jquery选择器：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(&apos;#profile-container input.myClass&apos;)</span><br></pre></td></tr></table></figure></p>
<p>这句可以满足需求，但并不是最好的方法。事实上，<strong>$(‘#profile-container’).find(‘input.myClass’)</strong>会比上面那句更快。为什么呢？这需要了解下<a href="http://blog.bigbinary.com/2010/02/15/how-jquery-selects-elements-using-sizzle.html" target="_blank" rel="noopener">Jquery选择器机制</a>。首先，$(‘#profile-container’)这个选择器可以很快的获得要选取的部分，这样当使用find()的时候，就会限制在一个很有限的查找范围，从而提升了性能。可以参开<a href="http://www.explainjs.com/explain?src=http://code.jquery.com/jquery-1.9.1.js" target="_blank" rel="noopener">Jquery源码</a>。 Rob Tarr的<a href="http://seesparkbox.com/foundry/jquery_selector_performance_testing" target="_blank" rel="noopener">文章</a>给出的一些测试结果可以印证这点，他还发现如果链式的使用find()逐层查找会更快，比如<strong>$(‘.container’).find(‘.main’).find(‘ul.list-1′).find(‘li’)</strong></p>
<p><a href="/images/uploads/2013/07/C9LBtwc.png"><img src="/images/uploads/2013/07/C9LBtwc-208x300.png" alt="C9LBtwc.png"></a></p>
<p><em>seesparkbox.com给出的选择器测试比较的结果</em></p>
<p>另一种精明的使用选择器提高性能的办法就是明确的的声明需要查找的元素类型。比如，如果我们知道要选择的元素类型的话，<strong>$(‘ul.todo’)</strong>明显会比<strong>$(‘.todo’)</strong>快的多。</p>
<h1 id="缓存jQuery选择器的结果-Cache-jQuery-selector-results"><a href="#缓存jQuery选择器的结果-Cache-jQuery-selector-results" class="headerlink" title="缓存jQuery选择器的结果 Cache jQuery selector results"></a>缓存jQuery选择器的结果 Cache jQuery selector results</h1><p>这实际上是一个总所周知的技巧，“不要重复”是经典的提升性能的准则和最佳实践。在Greg Franko精彩的幻灯片“<a href="http://gregfranko.com/jquery-best-practices/" target="_blank" rel="noopener">jQuery最佳实践</a>”里有一个有趣的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// Set&apos;s an element&apos;s title attribute using it&apos;s current text</span><br><span class="line"> $(&quot;.container input#elem&quot;).attr(&quot;title&quot;, $(&quot;.container input#elem&quot;).text());</span><br><span class="line">// Set&apos;s an element&apos;s text color to red</span><br><span class="line"> $(&quot;.container input#elem&quot;).css(&quot;color&quot;, &quot;red&quot;);</span><br><span class="line">// Makes the element fade out</span><br><span class="line"> $(&quot;.container input#elem&quot;).fadeOut();</span><br></pre></td></tr></table></figure></p>
<p>问题就在于当我们每次调用<strong>$(“.container input#elem”)</strong>的时候，jQuery都需要使用一次选择器，也就是要遍历一遍所有的DOM。也是就说<strong>“.container input#elem”</strong>这个查找过程要重复执行4次！上面的代码应该修改成下面这样<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// Stores the live DOM element inside of a variable</span><br><span class="line"> var elem = $(&quot;#elem&quot;);</span><br><span class="line">// Set&apos;s an element&apos;s title attribute using it&apos;s current text</span><br><span class="line"> elem.attr(&quot;title&quot;, elem.text());</span><br><span class="line">// Set&apos;s an element&apos;s text color to red</span><br><span class="line"> elem.css(&quot;color&quot;, &quot;red&quot;);</span><br><span class="line">// Makes the element fade out</span><br><span class="line"> elem.fadeOut();</span><br></pre></td></tr></table></figure></p>
<p>注意这里很“抠门”的使用了选择器，因为我们要查找一个id，所以就没有必要去关心这个id是在某个class或者html元素里了。只需要#elem，这样即简单，也更快。</p>
<h1 id="缓存-length属性-Cache-length-property"><a href="#缓存-length属性-Cache-length-property" class="headerlink" title="缓存.length属性 Cache .length property"></a>缓存.length属性 Cache .length property</h1><p>在Javascript里，每次获取数组的<strong>.length</strong>属性的时候，都需要进行一次运算。因为，对于下面这样一段代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for (var i = 0; i &amp;lt; myArray.length; i++)&#123;...&#125;</span><br></pre></td></tr></table></figure></p>
<p>假设myArray数组大小是10000的话，每次循环计算一次， myArray.length的值就会重复计算10000次。所以你应该按下面这样写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var arrayLength = myArray.length;</span><br><span class="line">for (var i = 0; i &amp;lt; arrayLength; i++)&#123;...&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样，只需要计算一次arrayLength就可以了。 这个真的这么重要么？其实在现代浏览器中，这两种的区别是<a href="http://jsperf.com/caching-array-length/4" target="_blank" rel="noopener">微乎其微</a>的，因为浏览器引擎已经做了这种优化。那么以后是否就完全不需要考虑这些了么？让我们看一下<a href="http://www.ctomczyk.pl/to-cache-or-not-to-cache-length-property/231/" target="_blank" rel="noopener"><strong>comp.lang.javascript新闻组的Thomas Lahn的观点</strong></a>（简单但比较哲学，译不出味道来，先放弃）：</p>
<blockquote>
<p>One should never rely on what one cannot know. You cannot know the runtime environments code once written will be exposed to. There is no good reason to assume the value of the “length” property should be automatically cached for a loop in the first place as it could change by statements in the loop. One <strong>can</strong> know instead that avoiding to access a property repeatedly whose value does not change, in favor of a local variable that holds this value, reduces code complexity. That has a chance – and it has been showed – to increase runtime efficiency, IOW to be faster. So it is wise to do that.</p>
</blockquote>
<h1 id="最小化DOM操作-Minimize-DOM-operations"><a href="#最小化DOM操作-Minimize-DOM-operations" class="headerlink" title="最小化DOM操作 Minimize DOM operations"></a>最小化DOM操作 Minimize DOM operations</h1><p>写DOM是很“重”的操作。记住：<a href="http://ejohn.org/blog/the-dom-is-a-mess/" target="_blank" rel="noopener">DOM很慢</a>。如果没意识到这点，你早晚会遇到性能问题。下面是一个让浏览器不堪重负的经典案例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var toDoList = $(&quot;#todoList&quot;);</span><br><span class="line">myTasks.forEach(function(task)&#123;</span><br><span class="line">  toDoList.append(&quot;&lt;li id=&quot; + task.index + &quot;&gt;&quot; + task.name + &quot;&lt;/li&gt;&quot;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>在这里例子里面，我们每次forEach循环都会有读&amp;写DOM的操作。实际上我们可以通过把这些节点存储在一个变量里，等到循环结束以后再一次性的把累积的变量写入DOM，从而规避这种混乱的情况。这样就只需要“附加”操作一次：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var toDoList = $(&quot;#todoList&quot;);</span><br><span class="line">dynamicItems = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">myTasks.forEach(function(task)&#123;</span><br><span class="line">  dynamicItems += &quot;&lt;li id=&quot; + index + &quot;&gt;&quot; + value + &quot;&lt;/li&gt;&quot;;</span><br><span class="line">&#125;);  </span><br><span class="line">toDoList.append(dynamicItems);</span><br></pre></td></tr></table></figure></p>
<h1 id="避免重复创建对象-Avoid-repeated-object-creation"><a href="#避免重复创建对象-Avoid-repeated-object-creation" class="headerlink" title="避免重复创建对象 Avoid repeated object creation"></a>避免重复创建对象 Avoid repeated object creation</h1><p>如果在函数中创建了一个对象的话，那么这个对象在每次函数调用的时候都会被重复创建一次。这可能并不是你的本意，特别是当这个对象是静态的，你本来没准备在任何情况下改变它的时候。让我们看下<a href="http://davidwalsh.name/javascript-optimization" target="_blank" rel="noopener">David Walsh给出的例子</a>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function cleanText(dirty) &#123;</span><br><span class="line">  // Get rid of SCRIPT tags</span><br><span class="line">  clean = dirty.replace(/&lt;script\[^&gt;\]*&gt;(\[\\s\\S\]*?)&lt;\\/script&gt;/gi, &quot;&quot;);</span><br><span class="line"></span><br><span class="line">  // Do some more cleaning, maybe whitespace, etc.</span><br><span class="line"></span><br><span class="line">  return clean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>文字记号<strong>//</strong>实际上是<strong>new RegExp</strong>的缩写形式，也就是说每次使用类似<strong>/ab+c/</strong>这样的语句实际上就同时<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener">创建了一个正则表达式对象</a>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//both expressions are equivalent</span><br><span class="line">var re = /ab+c/;</span><br><span class="line">var re = new RegExp(&quot;ab+c&quot;);</span><br></pre></td></tr></table></figure></p>
<p>在本例中，我们其实并不需要每次都创建一个正则表达式对象。可以像这面这样通过在函数外创建对象，然后在函数中调用（<em>through a closure scope–不太会翻译这句</em>）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var scriptRegex = /&lt;script\[^&gt;\]*&gt;(\[\\s\\S\]*?)&lt;\\/script&gt;/gi;</span><br><span class="line">function cleanText(dirty) &#123;</span><br><span class="line">  // Get rid of SCRIPT tags</span><br><span class="line">  clean = dirty.replace(scriptRegex, &quot;&quot;);</span><br><span class="line"></span><br><span class="line">  // Do some more cleaning, maybe whitespace, etc.</span><br><span class="line"></span><br><span class="line">  return clean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="委托事件监听-Delegate-event-listeners"><a href="#委托事件监听-Delegate-event-listeners" class="headerlink" title="委托事件监听 Delegate event listeners"></a>委托事件监听 Delegate event listeners</h1><p>给单独的元素使用事件监听会占用很多内存。如果给动态创建的很多新元素一一绑定事件监听的话代价会非常高。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">document.querySelector(&apos;#todoList li&apos;).addEventListener(&quot;click&quot;, function() &#123;</span><br><span class="line">    alert(&quot;Clicked on a task&quot;); </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>如果上面代码中的#todoList里有10000个li元素的话，也就是说会有10000个事件监听器。采用<a href="http://davidwalsh.name/event-delegate" target="_blank" rel="noopener">事件托管</a>的方法可以就可以不用给每个单独的元素使用监听器，而是在这些元素的父节点上使用一个监听器就可以了。上面的例子可以修改成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">document.querySelector(&apos;#todoList&apos;).addEventListener(&apos;click&apos;, function(e) &#123; </span><br><span class="line">    if (e.target &amp;amp;&amp;amp; e.target.tagName == &apos;LI&apos;) &#123; </span><br><span class="line">        alert(&quot;Clicked on a task&quot;); </span><br><span class="line">    &#125; </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>用jQuery的话更简单了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;#todoList&quot;).on(&quot;click&quot;, &apos;li&apos;, function() &#123;</span><br><span class="line">    alert(&quot;Clicked on a task&quot;); </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h1 id="只需要使用选择器的话，别用jQuery了-Stop-using-jQuery-when-you-only-need-selectors"><a href="#只需要使用选择器的话，别用jQuery了-Stop-using-jQuery-when-you-only-need-selectors" class="headerlink" title="只需要使用选择器的话，别用jQuery了 Stop using jQuery when you only need selectors"></a>只需要使用选择器的话，别用jQuery了 Stop using jQuery when you only need selectors</h1><p>总所周知, jQuery是遍历DEOM的最佳工具。但是如果你的项目只需要使用jQuery进行这一个工作的，就需要慎重权衡下是否值得因为这个需求而加载一个外部库文件。因为使用document.querySelectorAll也可以和使用jQuery一样实现这些基本的选择功能。是的，你没看错，完全可以使用浏览器内置功能实现像document.querySelectorAll(‘.content ul li’)这样的日常选择器操作。你说这样写看起来又长又丑？让我们看一下<a href="http://flippinawesome.org/2013/05/06/5-things-you-should-stop-doing-with-jquery/" target="_blank" rel="noopener">Burke Holland</a>在他的文章<a href="http://flippinawesome.org/2013/05/06/5-things-you-should-stop-doing-with-jquery/" target="_blank" rel="noopener">5 Things You Should Stop Doing With jQuery</a>里的方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;container&quot;&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li id=&quot;pink&quot;&gt;Pink&lt;/li&gt;</span><br><span class="line">    &lt;li id=&quot;salmon&quot;&gt;Salmon&lt;/li&gt;</span><br><span class="line">    &lt;li id=&quot;blue&quot;&gt;Blue&lt;/li&gt;</span><br><span class="line">    &lt;li id=&quot;green&quot;&gt;Green&lt;/li&gt;</span><br><span class="line">    &lt;li id=&quot;red&quot;&gt;Red&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;  </span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  // create a global &apos;$&apos; variable</span><br><span class="line">  window.$ = function(selector) &#123;</span><br><span class="line">    return document.querySelector(selector);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  (function() &#123;</span><br><span class="line">    // select item1 by id and change it&apos;s background color to salmon</span><br><span class="line">    var item = $(&quot;#salmon&quot;).style.backgroundColor=&quot;salmon&quot;;</span><br><span class="line">    console.log(item);</span><br><span class="line">  &#125;());  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>这样写就可以继续使用你所钟爱的$(‘mySelector’)结构了。 那么querySelectorAll和jQuery的选择器相比究竟有多快呢？这要取决于不同的浏览器，但<a href="http://jsperf.com/jquery-vs-document-queryselector" target="_blank" rel="noopener">至少快5倍</a>！尽管JQuery在document.querySelectorAll方法存在的情况下其实也是会自动调用它来实现选择器，但是我们是不是还要权衡下这多加载的90KB（jquery.mini.js文件）呢？ 还想进一步学习么？我推荐进行在Javascript中更高效的进行分析和管理数据结构（profiling and managing data structures efficiently）这方面的学习。我以后可能会围绕这块写一些东西，也可以参考下这篇<a href="http://coding.smashingmagazine.com/2012/11/05/writing-fast-memory-efficient-javascript/" target="_blank" rel="noopener">文章</a>。 本文地址: <a href="http://awebird.com/blog/art/55">http://awebird.com/blog/art/55</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://awebird.com/2013/07/11/e3-80-90-e7-bf-bb-e8-af-91-e3-80-91-e5-8d-b3-e5-ad-a6-e5-8d-b3-e7-94-a8-e7-9a-84web-e5-89-8d-e7-ab-af-e4-bc-98-e5-8c-96-e6-8a-80-e5-b7-a7-front-end-optimizations-you-can-start-doing-right-now/" data-id="cjibcghgj0009xopcgp2sinck" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Front-end/">Front-end</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web/">Web</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jquery/">jquery</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/optimization/">optimization</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/优化/">优化</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/翻译/">翻译</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2013/07/14/e4-bd-bf-e7-94-a8subversion-e7-9a-84svnsync-e5-9c-a8windows-e4-b8-8b-e5-90-8c-e6-ad-a5svn-e7-89-88-e6-9c-ac-e5-ba-93-e6-9d-a5showlog/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          使用svnsync在windows下同步svn版本库来“极速”showlog
        
      </div>
    </a>
  
  
    <a href="/2013/07/07/e4-b8-ad-e8-bd-ac-e6-9c-8d-e5-8a-a1-e5-99-a8jsonp-e8-b7-a8-e5-9f-9f-e4-bd-bf-e7-94-a8cros-e8-b7-a8-e5-9f-9f/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">中转服务器JSONP跨域 &amp; 使用CORS跨域</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/163邮箱/">163邮箱</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/400/">400</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ActionScript/">ActionScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CORS/">CORS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flash/">Flash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Front-end/">Front-end</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GMS服务包/">GMS服务包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Geolocation/">Geolocation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML5/">HTML5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IP定位/">IP定位</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSONP/">JSONP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/">Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angularjs/">angularjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apache/">apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/assets/">assets</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/curl/">curl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fiddler/">fiddler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/google/">google</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hashtag/">hashtag</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hosts/">hosts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/httpd-conf/">httpd.conf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hybrid-app/">hybrid app</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iscroll/">iscroll</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jquery/">jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/native-app/">native app</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/optimization/">optimization</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/overflow-hidden/">overflow:hidden</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/qq互联/">qq互联</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/qq登录/">qq登录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/showlog/">showlog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stackoverflow/">stackoverflow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/subversion/">subversion</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svnsync/">svnsync</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ui-router/">ui-router</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webapp/">webapp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webview/">webview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/买房/">买房</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/优化/">优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/国行/">国行</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/地图API/">地图API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/婚纱照/">婚纱照</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微信/">微信</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/换工作/">换工作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日志/">日志</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/未婚先胖/">未婚先胖</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/本机/">本机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/毕业设计/">毕业设计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/测试/">测试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/生活/">生活</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电子技术实验/">电子技术实验</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/百度/">百度</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/结婚/">结婚</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/翻译/">翻译</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/虚拟实验/">虚拟实验</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/调试/">调试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/调试，前端/">调试，前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/谷歌/">谷歌</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/跨域/">跨域</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/通信录/">通信录</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/163邮箱/" style="font-size: 10px;">163邮箱</a> <a href="/tags/400/" style="font-size: 10px;">400</a> <a href="/tags/ActionScript/" style="font-size: 10px;">ActionScript</a> <a href="/tags/Android/" style="font-size: 16.67px;">Android</a> <a href="/tags/CORS/" style="font-size: 10px;">CORS</a> <a href="/tags/Flash/" style="font-size: 10px;">Flash</a> <a href="/tags/Front-end/" style="font-size: 10px;">Front-end</a> <a href="/tags/GMS服务包/" style="font-size: 10px;">GMS服务包</a> <a href="/tags/Geolocation/" style="font-size: 10px;">Geolocation</a> <a href="/tags/HTML5/" style="font-size: 13.33px;">HTML5</a> <a href="/tags/IP定位/" style="font-size: 10px;">IP定位</a> <a href="/tags/JSONP/" style="font-size: 10px;">JSONP</a> <a href="/tags/PHP/" style="font-size: 13.33px;">PHP</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/angularjs/" style="font-size: 10px;">angularjs</a> <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/assets/" style="font-size: 10px;">assets</a> <a href="/tags/css/" style="font-size: 10px;">css</a> <a href="/tags/curl/" style="font-size: 10px;">curl</a> <a href="/tags/fiddler/" style="font-size: 13.33px;">fiddler</a> <a href="/tags/google/" style="font-size: 10px;">google</a> <a href="/tags/hashtag/" style="font-size: 10px;">hashtag</a> <a href="/tags/hosts/" style="font-size: 10px;">hosts</a> <a href="/tags/httpd-conf/" style="font-size: 10px;">httpd.conf</a> <a href="/tags/hybrid-app/" style="font-size: 16.67px;">hybrid app</a> <a href="/tags/iscroll/" style="font-size: 10px;">iscroll</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/jquery/" style="font-size: 10px;">jquery</a> <a href="/tags/native-app/" style="font-size: 10px;">native app</a> <a href="/tags/optimization/" style="font-size: 10px;">optimization</a> <a href="/tags/overflow-hidden/" style="font-size: 10px;">overflow:hidden</a> <a href="/tags/qq互联/" style="font-size: 10px;">qq互联</a> <a href="/tags/qq登录/" style="font-size: 10px;">qq登录</a> <a href="/tags/showlog/" style="font-size: 10px;">showlog</a> <a href="/tags/stackoverflow/" style="font-size: 10px;">stackoverflow</a> <a href="/tags/subversion/" style="font-size: 10px;">subversion</a> <a href="/tags/svn/" style="font-size: 10px;">svn</a> <a href="/tags/svnsync/" style="font-size: 10px;">svnsync</a> <a href="/tags/ui-router/" style="font-size: 10px;">ui-router</a> <a href="/tags/webapp/" style="font-size: 10px;">webapp</a> <a href="/tags/webview/" style="font-size: 13.33px;">webview</a> <a href="/tags/windows/" style="font-size: 10px;">windows</a> <a href="/tags/买房/" style="font-size: 10px;">买房</a> <a href="/tags/优化/" style="font-size: 10px;">优化</a> <a href="/tags/前端/" style="font-size: 13.33px;">前端</a> <a href="/tags/国行/" style="font-size: 10px;">国行</a> <a href="/tags/地图API/" style="font-size: 10px;">地图API</a> <a href="/tags/婚纱照/" style="font-size: 10px;">婚纱照</a> <a href="/tags/微信/" style="font-size: 10px;">微信</a> <a href="/tags/换工作/" style="font-size: 10px;">换工作</a> <a href="/tags/日志/" style="font-size: 10px;">日志</a> <a href="/tags/未婚先胖/" style="font-size: 10px;">未婚先胖</a> <a href="/tags/本机/" style="font-size: 10px;">本机</a> <a href="/tags/毕业设计/" style="font-size: 10px;">毕业设计</a> <a href="/tags/测试/" style="font-size: 10px;">测试</a> <a href="/tags/生活/" style="font-size: 13.33px;">生活</a> <a href="/tags/电子技术实验/" style="font-size: 10px;">电子技术实验</a> <a href="/tags/百度/" style="font-size: 10px;">百度</a> <a href="/tags/结婚/" style="font-size: 10px;">结婚</a> <a href="/tags/翻译/" style="font-size: 10px;">翻译</a> <a href="/tags/虚拟实验/" style="font-size: 10px;">虚拟实验</a> <a href="/tags/调试/" style="font-size: 10px;">调试</a> <a href="/tags/调试，前端/" style="font-size: 10px;">调试，前端</a> <a href="/tags/谷歌/" style="font-size: 10px;">谷歌</a> <a href="/tags/跨域/" style="font-size: 10px;">跨域</a> <a href="/tags/通信录/" style="font-size: 10px;">通信录</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">September 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/06/11/Migration/">Migration</a>
          </li>
        
          <li>
            <a href="/2014/12/31/2014-e5-b9-b4-e7-bb-88-e5-b0-8f-e7-bb-93/">2014年终小结</a>
          </li>
        
          <li>
            <a href="/2014/05/29/e5-b7-b2-e6-98-8f/">未婚先胖...</a>
          </li>
        
          <li>
            <a href="/2013/12/08/e5-9c-a8android-webview-e7-9a-84assets-e7-9b-ae-e5-bd-95-e4-b8-8b-e5-bc-80-e5-8f-91hybrid-app-e7-9a-84-e4-b8-80-e4-ba-9b-e5-9d-91/">在Android Webview的assets目录下开发Hybrid App的一些坑…</a>
          </li>
        
          <li>
            <a href="/2013/09/11/e4-bd-bf-e7-94-a8fiddler-e8-b0-83-e8-af-95native-e5-92-8chybrid-app/">使用fiddler调试Native和Hybrid App</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 awebird<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>